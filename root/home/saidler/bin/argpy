#!/bin/bash

ARGPY="$1"

cat << EOF > $PWD/${ARGPY:-temp.py}
#!/usr/bin/env python

import os
import re
import sys

from argparse import ArgumentParser

def main(argv):
    parser = ArgumentParser()
    parser.add_argument(
        '--version',
        action='store_true',
        default='v0.0',
        help='show the version')
    parser.add_argument(
        '--opt1',
        default='opt1-default',
        help='help message for opt1')
    parser.add_argument(
        'pos1',
        default='pos1-default',
        help='help message for pos1')

    ns = parser.parse_args()
    print 'ns: ', ns

if __name__ == '__main__':
    main(sys.argv)
EOF
chmod 755 $PWD/${ARGPY:-temp.py}
